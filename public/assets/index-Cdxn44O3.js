var g=Object.defineProperty,j=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var h=(a,s,e)=>s in a?g(a,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[s]=e,u=(a,s)=>{for(var e in s||(s={}))v.call(s,e)&&h(a,e,s[e]);if(x)for(var e of x(s))N.call(s,e)&&h(a,e,s[e]);return a},p=(a,s)=>j(a,y(s));var b=(a,s,e)=>new Promise((o,l)=>{var i=r=>{try{n(e.next(r))}catch(m){l(m)}},d=r=>{try{n(e.throw(r))}catch(m){l(m)}},n=r=>r.done?o(r.value):Promise.resolve(r.value).then(i,d);n((e=e.apply(a,s)).next())});import{j as t,z as c}from"./ui-vendor-BkLQtwW7.js";import{u as w,r as f,L as S}from"./react-vendor-DbADd6nL.js";import{b as k}from"./index-BPW3Y20o.js";import"./state-vendor-DhTtZAk7.js";const A=()=>{const a=w(),{login:s}=k(),[e,o]=f.useState(!1),[l,i]=f.useState({username:"",password:""}),d=n=>b(void 0,null,function*(){if(n.preventDefault(),!l.username||!l.password){c.error("请填上你的秘密代号！");return}o(!0);try{const r=yield s(l);r.success?(c.success("欢迎回来！"),a("/dashboard")):c.error(r.error)}catch(r){c.error("登录失败...")}finally{o(!1)}});return t.jsxs("div",{className:"w-full",children:[t.jsxs("form",{onSubmit:d,className:"space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-xl font-hand font-bold text-pencil ml-1 rotate-slight-n1",children:"你是谁？"}),t.jsx("input",{type:"text",name:"username",placeholder:"名字或邮箱",className:"input-hand",value:l.username,onChange:n=>i(p(u({},l),{username:n.target.value})),disabled:e})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-xl font-hand font-bold text-pencil ml-1 rotate-slight-1",children:"秘密口令"}),t.jsx("input",{type:"password",name:"password",placeholder:"嘘...",className:"input-hand",value:l.password,onChange:n=>i(p(u({},l),{password:n.target.value})),disabled:e})]}),t.jsx("button",{type:"submit",className:"btn-primary w-full mt-8 text-2xl font-bold py-3 rotate-slight-n1 disabled:opacity-50",disabled:e,children:e?"正在翻开...":"打开日记"})]}),t.jsx("div",{className:"mt-8 text-center",children:t.jsxs("p",{className:"font-hand text-lg text-gray-500",children:["第一次来？ ",t.jsx(S,{to:"/register",className:"text-marker-blue underline decoration-wavy font-bold hover:text-blue-500",children:"领一本手账"})]})})]})};export{A as default};
