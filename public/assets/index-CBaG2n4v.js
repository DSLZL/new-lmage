var R=Object.defineProperty,D=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var z=(a,r,t)=>r in a?R(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,v=(a,r)=>{for(var t in r||(r={}))I.call(r,t)&&z(a,t,r[t]);if(k)for(var t of k(r))P.call(r,t)&&z(a,t,r[t]);return a},M=(a,r)=>D(a,T(r));var w=(a,r,t)=>new Promise((n,m)=>{var u=s=>{try{d(t.next(s))}catch(c){m(c)}},p=s=>{try{d(t.throw(s))}catch(c){m(c)}},d=s=>s.done?n(s.value):Promise.resolve(s.value).then(u,p);d((t=t.apply(a,r)).next())});import{z as x,u as U,j as l}from"./ui-vendor-BkLQtwW7.js";import{r as e}from"./react-vendor-DbADd6nL.js";import{a as O}from"./state-vendor-DhTtZAk7.js";import{n as B,a as q}from"./X.es-CAzH8vWB.js";import{p as H,s as F}from"./index-Bfp0FfWb.js";import{s as J}from"./Copy.es-C0F8Q6J5.js";const W=new Map([["bold",e.createElement(e.Fragment,null,e.createElement("path",{d:"M228,144v64a12,12,0,0,1-12,12H40a12,12,0,0,1-12-12V144a12,12,0,0,1,24,0v52H204V144a12,12,0,0,1,24,0Zm-108.49,8.49a12,12,0,0,0,17,0l40-40a12,12,0,0,0-17-17L140,115V32a12,12,0,0,0-24,0v83L96.49,95.51a12,12,0,0,0-17,17Z"}))],["duotone",e.createElement(e.Fragment,null,e.createElement("path",{d:"M216,48V208H40V48A16,16,0,0,1,56,32H200A16,16,0,0,1,216,48Z",opacity:"0.2"}),e.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40a8,8,0,0,0-11.32-11.32L136,124.69V32a8,8,0,0,0-16,0v92.69L93.66,98.34a8,8,0,0,0-11.32,11.32Z"}))],["fill",e.createElement(e.Fragment,null,e.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40A8,8,0,0,0,168,96H136V32a8,8,0,0,0-16,0V96H88a8,8,0,0,0-5.66,13.66Z"}))],["light",e.createElement(e.Fragment,null,e.createElement("path",{d:"M222,144v64a6,6,0,0,1-6,6H40a6,6,0,0,1-6-6V144a6,6,0,0,1,12,0v58H210V144a6,6,0,0,1,12,0Zm-98.24,4.24a6,6,0,0,0,8.48,0l40-40a6,6,0,0,0-8.48-8.48L134,129.51V32a6,6,0,0,0-12,0v97.51L92.24,99.76a6,6,0,0,0-8.48,8.48Z"}))],["regular",e.createElement(e.Fragment,null,e.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40a8,8,0,0,0-11.32-11.32L136,124.69V32a8,8,0,0,0-16,0v92.69L93.66,98.34a8,8,0,0,0-11.32,11.32Z"}))],["thin",e.createElement(e.Fragment,null,e.createElement("path",{d:"M220,144v64a4,4,0,0,1-4,4H40a4,4,0,0,1-4-4V144a4,4,0,0,1,8,0v60H212V144a4,4,0,0,1,8,0Zm-94.83,2.83a4,4,0,0,0,5.66,0l40-40a4,4,0,1,0-5.66-5.66L132,134.34V32a4,4,0,0,0-8,0V134.34L90.83,101.17a4,4,0,0,0-5.66,5.66Z"}))]]),G=new Map([["bold",e.createElement(e.Fragment,null,e.createElement("path",{d:"M100,152v56a12,12,0,0,1-24,0V190.07l-6.17,8.81a12,12,0,0,1-19.66,0L44,190.07V208a12,12,0,0,1-24,0V152a12,12,0,0,1,21.83-6.88L60,171.07l18.17-25.95A12,12,0,0,1,100,152Zm84,28a40,40,0,0,1-40,40H128a12,12,0,0,1-12-12V152a12,12,0,0,1,12-12h16A40,40,0,0,1,184,180Zm-24,0a16,16,0,0,0-16-16h-4v32h4A16,16,0,0,0,160,180Zm60-92V224a12,12,0,0,1-24,0V104H148a12,12,0,0,1-12-12V44H60v64a12,12,0,0,1-24,0V40A20,20,0,0,1,56,20h96a12,12,0,0,1,8.49,3.52l56,56A12,12,0,0,1,220,88Zm-60-8h23L160,57Z"}))],["duotone",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,88H152V32Z",opacity:"0.2"}),e.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40v72a8,8,0,0,0,16,0V40h88V88a8,8,0,0,0,8,8h48V224a8,8,0,0,0,16,0V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM144,144H128a8,8,0,0,0-8,8v56a8,8,0,0,0,8,8h16a36,36,0,0,0,0-72Zm0,56h-8V160h8a20,20,0,0,1,0,40Zm-40-48v56a8,8,0,0,1-16,0V177.38L74.55,196.59a8,8,0,0,1-13.1,0L48,177.38V208a8,8,0,0,1-16,0V152a8,8,0,0,1,14.55-4.59L68,178.05l21.45-30.64A8,8,0,0,1,104,152Z"}))],["fill",e.createElement(e.Fragment,null,e.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40v76a4,4,0,0,0,4,4H196a4,4,0,0,1,4,4V224a8,8,0,0,0,9.19,7.91,8.15,8.15,0,0,0,6.81-8.16V88A8,8,0,0,0,213.66,82.34ZM152,88V44l44,44Zm-8,56H128a8,8,0,0,0-8,8v56a8,8,0,0,0,8,8h15.32c19.66,0,36.21-15.48,36.67-35.13A36,36,0,0,0,144,144Zm-.49,56H136V160h8a20,20,0,0,1,20,20.77C163.58,191.59,154.34,200,143.51,200ZM104,152v55.73A8.17,8.17,0,0,1,96.53,216,8,8,0,0,1,88,208V177.38l-13.32,19a8.3,8.3,0,0,1-4.2,3.2,8,8,0,0,1-9-3L48,177.38v30.35A8.17,8.17,0,0,1,40.53,216,8,8,0,0,1,32,208V152.31a8.27,8.27,0,0,1,4.56-7.53,8,8,0,0,1,10,2.63L68,178.05l21.27-30.39a8.28,8.28,0,0,1,8.06-3.55A8,8,0,0,1,104,152Z"}))],["light",e.createElement(e.Fragment,null,e.createElement("path",{d:"M212.24,83.76l-56-56A6,6,0,0,0,152,26H56A14,14,0,0,0,42,40v72a6,6,0,0,0,12,0V40a2,2,0,0,1,2-2h90V88a6,6,0,0,0,6,6h50V224a6,6,0,0,0,12,0V88A6,6,0,0,0,212.24,83.76ZM158,46.48,193.52,82H158ZM144,146H128a6,6,0,0,0-6,6v56a6,6,0,0,0,6,6h16a34,34,0,0,0,0-68Zm0,56H134V158h10a22,22,0,0,1,0,44Zm-42-50v56a6,6,0,0,1-12,0V171L72.92,195.44a6,6,0,0,1-9.84,0L46,171v37a6,6,0,0,1-12,0V152a6,6,0,0,1,10.92-3.44l23.08,33,23.08-33A6,6,0,0,1,102,152Z"}))],["regular",e.createElement(e.Fragment,null,e.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40v72a8,8,0,0,0,16,0V40h88V88a8,8,0,0,0,8,8h48V224a8,8,0,0,0,16,0V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM144,144H128a8,8,0,0,0-8,8v56a8,8,0,0,0,8,8h16a36,36,0,0,0,0-72Zm0,56h-8V160h8a20,20,0,0,1,0,40Zm-40-48v56a8,8,0,0,1-16,0V177.38L74.55,196.59a8,8,0,0,1-13.1,0L48,177.38V208a8,8,0,0,1-16,0V152a8,8,0,0,1,14.55-4.59L68,178.05l21.45-30.64A8,8,0,0,1,104,152Z"}))],["thin",e.createElement(e.Fragment,null,e.createElement("path",{d:"M210.83,85.17l-56-56A4,4,0,0,0,152,28H56A12,12,0,0,0,44,40v72a4,4,0,0,0,8,0V40a4,4,0,0,1,4-4h92V88a4,4,0,0,0,4,4h52V224a4,4,0,0,0,8,0V88A4,4,0,0,0,210.83,85.17ZM156,41.65,198.34,84H156ZM144,148H128a4,4,0,0,0-4,4v56a4,4,0,0,0,4,4h16a32,32,0,0,0,0-64Zm0,56H132V156h12a24,24,0,0,1,0,48Zm-44-52v56a4,4,0,0,1-8,0V164.69l-20.72,29.6a4,4,0,0,1-6.56,0L44,164.69V208a4,4,0,0,1-8,0V152a4,4,0,0,1,7.28-2.29L68,185l24.72-35.31A4,4,0,0,1,100,152Z"}))]]),K=new Map([["bold",e.createElement(e.Fragment,null,e.createElement("path",{d:"M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"}))],["duotone",e.createElement(e.Fragment,null,e.createElement("path",{d:"M218.34,119.6,183.6,154.34a46.58,46.58,0,0,1-44.31,12.26c-.31.34-.62.67-.95,1L103.6,202.34A46.63,46.63,0,1,1,37.66,136.4L72.4,101.66A46.6,46.6,0,0,1,116.71,89.4c.31-.34.62-.67,1-1L152.4,53.66a46.63,46.63,0,0,1,65.94,65.94Z",opacity:"0.2"}),e.createElement("path",{d:"M240,88.23a54.43,54.43,0,0,1-16,37L189.25,160a54.27,54.27,0,0,1-38.63,16h-.05A54.63,54.63,0,0,1,96,119.84a8,8,0,0,1,16,.45A38.62,38.62,0,0,0,150.58,160h0a38.39,38.39,0,0,0,27.31-11.31l34.75-34.75a38.63,38.63,0,0,0-54.63-54.63l-11,11A8,8,0,0,1,135.7,59l11-11A54.65,54.65,0,0,1,224,48,54.86,54.86,0,0,1,240,88.23ZM109,185.66l-11,11A38.41,38.41,0,0,1,70.6,208h0a38.63,38.63,0,0,1-27.29-65.94L78,107.31A38.63,38.63,0,0,1,144,135.71a8,8,0,0,0,7.78,8.22H152a8,8,0,0,0,8-7.78A54.86,54.86,0,0,0,144,96a54.65,54.65,0,0,0-77.27,0L32,130.75A54.62,54.62,0,0,0,70.56,224h0a54.28,54.28,0,0,0,38.64-16l11-11A8,8,0,0,0,109,185.66Z"}))],["fill",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM115.7,192.49a43.31,43.31,0,0,1-55-66.43l25.37-25.37a43.35,43.35,0,0,1,61.25,0,42.9,42.9,0,0,1,9.95,15.43,8,8,0,1,1-15,5.6A27.33,27.33,0,0,0,97.37,112L72,137.37a27.32,27.32,0,0,0,34.68,41.91,8,8,0,1,1,9,13.21Zm79.61-62.55-25.37,25.37A43,43,0,0,1,139.32,168h0a43.35,43.35,0,0,1-40.53-28.12,8,8,0,1,1,15-5.6A27.35,27.35,0,0,0,139.28,152h0a27.14,27.14,0,0,0,19.32-8L184,118.63a27.32,27.32,0,0,0-34.68-41.91,8,8,0,1,1-9-13.21,43.32,43.32,0,0,1,55,66.43Z"}))],["light",e.createElement(e.Fragment,null,e.createElement("path",{d:"M238,88.18a52.42,52.42,0,0,1-15.4,35.66l-34.75,34.75A52.28,52.28,0,0,1,150.62,174h-.05A52.63,52.63,0,0,1,98,119.9a6,6,0,0,1,6-5.84h.17a6,6,0,0,1,5.83,6.16A40.62,40.62,0,0,0,150.58,162h0a40.4,40.4,0,0,0,28.73-11.9l34.75-34.74A40.63,40.63,0,0,0,156.63,57.9l-11,11a6,6,0,0,1-8.49-8.49l11-11a52.62,52.62,0,0,1,74.43,0A52.83,52.83,0,0,1,238,88.18Zm-127.62,98.9-11,11A40.36,40.36,0,0,1,70.6,210h0a40.63,40.63,0,0,1-28.7-69.36L76.62,105.9A40.63,40.63,0,0,1,146,135.77a6,6,0,0,0,5.83,6.16H152a6,6,0,0,0,6-5.84A52.63,52.63,0,0,0,68.14,97.42L33.38,132.16A52.63,52.63,0,0,0,70.56,222h0a52.26,52.26,0,0,0,37.22-15.42l11-11a6,6,0,1,0-8.49-8.48Z"}))],["regular",e.createElement(e.Fragment,null,e.createElement("path",{d:"M240,88.23a54.43,54.43,0,0,1-16,37L189.25,160a54.27,54.27,0,0,1-38.63,16h-.05A54.63,54.63,0,0,1,96,119.84a8,8,0,0,1,16,.45A38.62,38.62,0,0,0,150.58,160h0a38.39,38.39,0,0,0,27.31-11.31l34.75-34.75a38.63,38.63,0,0,0-54.63-54.63l-11,11A8,8,0,0,1,135.7,59l11-11A54.65,54.65,0,0,1,224,48,54.86,54.86,0,0,1,240,88.23ZM109,185.66l-11,11A38.41,38.41,0,0,1,70.6,208h0a38.63,38.63,0,0,1-27.29-65.94L78,107.31A38.63,38.63,0,0,1,144,135.71a8,8,0,0,0,16,.45A54.86,54.86,0,0,0,144,96a54.65,54.65,0,0,0-77.27,0L32,130.75A54.62,54.62,0,0,0,70.56,224h0a54.28,54.28,0,0,0,38.64-16l11-11A8,8,0,0,0,109,185.66Z"}))],["thin",e.createElement(e.Fragment,null,e.createElement("path",{d:"M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"}))]]),C=e.forwardRef((a,r)=>e.createElement(H,M(v({ref:r},a),{weights:W})));C.displayName="DownloadSimpleIcon";const Q=C,S=e.forwardRef((a,r)=>e.createElement(H,M(v({ref:r},a),{weights:G})));S.displayName="FileMdIcon";const X=S,$=e.forwardRef((a,r)=>e.createElement(H,M(v({ref:r},a),{weights:K})));$.displayName="LinkIcon";const Y=$,N=O.create({baseURL:"",timeout:12e4,headers:{"Content-Type":"application/json"}});N.interceptors.request.use(a=>{const r=localStorage.getItem("auth-storage");if(r)try{const{state:t}=JSON.parse(r),n=t==null?void 0:t.token;n&&(a.headers.Authorization=`Bearer ${n}`)}catch(t){console.error("è§£æ token å¤±è´¥:",t)}return a.data instanceof FormData&&(a.headers["Content-Type"]="multipart/form-data"),a},a=>(console.error("è¯·æ±‚é”™è¯¯:",a),Promise.reject(a)));N.interceptors.response.use(a=>a,a=>{if(a.response){const{status:r,data:t}=a.response;switch(r){case 401:localStorage.removeItem("auth-storage"),x.error("ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•"),setTimeout(()=>{window.location.href="/login"},1e3);break;case 403:x.error("æ²¡æœ‰æƒé™è®¿é—®è¯¥èµ„æº");break;case 404:x.error("è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨");break;case 500:x.error("æœåŠ¡å™¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•");break;case 502:case 503:case 504:x.error("æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åé‡è¯•");break;default:const n=(t==null?void 0:t.error)||(t==null?void 0:t.message)||"è¯·æ±‚å¤±è´¥";x.error(n)}}else a.request?a.code==="ECONNABORTED"||a.message.includes("timeout")?x.error("ä¸Šä¼ è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–å°è¯•å‹ç¼©å›¾ç‰‡åé‡è¯•"):x.error("ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥"):x.error(a.message||"è¯·æ±‚å¤±è´¥");return Promise.reject(a)});const _=(a,r,t)=>N.post(a,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n=>{if(t&&n.total){const m=Math.round(n.loaded*100/n.total);t(m)}}}),e0=(a,r)=>{let t=0,n=null,m=null;const u=(...p)=>{n=p;const d=Date.now();d-t>=r?(t=d,a(...p)):m||(m=setTimeout(()=>{t=Date.now(),m=null,n&&a(...n)},r-(d-t)))};return u.flush=()=>{m&&(clearTimeout(m),m=null),n&&(a(...n),n=null)},u},a0=(a,r=3,t)=>w(void 0,null,function*(){var u,p;if(a.size>10485760)return{success:!1,filename:a.name,size:a.size,type:a.type,error:`æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ ${(10485760/1024/1024).toFixed(0)}MB`};const m=new FormData;m.append("file",a);for(let d=0;d<r;d++)try{const s=yield _("/upload",m,t),c=Array.isArray(s.data)?s.data[0]:s.data;if(!c||!c.src)throw new Error("ä¸Šä¼ å¤±è´¥ï¼šæœåŠ¡å™¨è¿”å›æ•°æ®æ ¼å¼é”™è¯¯");return{success:!0,filename:a.name,size:a.size,type:a.type,data:c,uploadTime:new Date().toISOString()}}catch(s){if(d===r-1)return{success:!1,filename:a.name,size:a.size,type:a.type,error:((p=(u=s.response)==null?void 0:u.data)==null?void 0:p.error)||s.message||"ä¸Šä¼ å¤±è´¥"};yield new Promise(c=>setTimeout(c,1e3*(d+1)))}}),t0=(a,r,t,n)=>w(void 0,null,function*(){const m=[];let u=0,p=0;const d=r.reduce((h,Z)=>h+Z.size,0),s=new Array(r.length).fill(0);let c=0;const g=n?e0(n,100):null,y=()=>w(void 0,null,function*(){for(;p<a.length;){const h=p++,Z=a[h],b=r[h];s[h];try{const V=yield Z(i=>{const f=b.size*i/100,L=f-s[h];s[h]=f,c+=L;const j=Math.round(c/d*100);g&&g({completed:u,total:a.length,percent:Math.min(j,99),currentIndex:h,result:null})});m[h]=V,u++;const o=b.size-s[h];if(s[h]=b.size,c+=o,g){const i=Math.round(c/d*100);g({completed:u,total:a.length,percent:u===a.length?100:Math.min(i,99),currentIndex:h,result:V})}}catch(V){m[h]={success:!1,error:V.message||"ä¸Šä¼ å¤±è´¥"},u++;const o=b.size-s[h];s[h]=b.size,c+=o}}}),A=Array(Math.min(t,a.length)).fill(null).map(()=>y());return yield Promise.all(A),g&&(g.flush(),n({completed:a.length,total:a.length,percent:100,currentIndex:a.length-1,result:m[m.length-1]})),m}),l0=(n,m,...u)=>w(void 0,[n,m,...u],function*(a,r,t={}){const{concurrency:p=5,retries:d=3}=t;try{const s=a.map(A=>h=>a0(A,d,h)),c=yield t0(s,a,p,r),g=c.filter(A=>A.success),y=c.filter(A=>!A.success);return{success:!0,data:c,summary:{total:c.length,success:g.length,failed:y.length}}}catch(s){return{success:!1,error:s.message||"æ‰¹é‡ä¸Šä¼ å¤±è´¥",data:[]}}}),d0=()=>{const[a,r]=e.useState(!1),[t,n]=e.useState([]),[m,u]=e.useState({completed:0,total:0,percent:0}),p=e.useCallback(o=>w(void 0,null,function*(){r(!0),n([]),u({completed:0,total:o.length,percent:0});try{const i=yield l0(Array.from(o),f=>u(f),{concurrency:5,retries:3});i.success?(n(i.data),x.success(`æå®šï¼æˆåŠŸæ·»åŠ äº† ${i.summary.success} å¼ æ¶‚é¸¦ã€‚`)):x.error(i.error)}catch(i){x.error("å‡ºé”™äº†ï¼Œæ€ä¹ˆå›äº‹ï¼Ÿ")}finally{r(!1)}}),[]),{getRootProps:d,getInputProps:s,isDragActive:c}=U({onDrop:p,accept:{"image/*":[".png",".jpg",".jpeg",".gif",".webp",".svg"]},multiple:!0,disabled:a}),g=e.useCallback(o=>{navigator.clipboard.writeText(o),x.success("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼")},[]),y=e.useCallback(()=>{const o=t.filter(E=>E.success),i={timestamp:new Date().toISOString(),images:o.map(E=>({filename:E.filename,url:window.location.origin+E.data.src}))},f=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),L=URL.createObjectURL(f),j=document.createElement("a");j.href=L,j.download=`diary-entries-${Date.now()}.json`,j.click(),URL.revokeObjectURL(L)},[t]),A=e.useCallback(()=>{const o=t.filter(i=>i.success).map(i=>window.location.origin+i.data.src).join(`
`);g(o)},[t,g]),h=e.useCallback(()=>{const o=t.filter(i=>i.success).map(i=>`![${i.filename}](${window.location.origin}${i.data.src})`).join(`
`);g(o)},[t,g]),Z=e.useCallback(o=>{x("æ‰‹åŠ¨é‡è¯•åŠŸèƒ½è¿˜åœ¨å¼€å‘ä¸­...",{icon:"ğŸš§"})},[]),b=e.useCallback(()=>{n([])},[]),V=t.filter(o=>o.success).length;return l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-4xl font-bold text-pencil rotate-slight-n1",children:"æ–°æ—¥è®°"}),l.jsx("p",{className:"text-xl text-gray-500 font-hand mt-2 rotate-slight-1",children:"åœ¨è¿™é‡Œç²˜è´´ä½ çš„å›å¿†..."})]}),t.length===0&&!a&&l.jsxs("div",M(v({},d()),{className:`
            border-4 border-dashed rounded-lg p-12 text-center cursor-pointer transition-all duration-300
            ${c?"border-marker-blue bg-blue-50 scale-105 rotate-1":"border-gray-300 hover:border-pencil hover:rotate-slight-1"}
          `,children:[l.jsx("input",v({},s())),l.jsx(F,{size:64,className:`mx-auto mb-4 ${c?"text-marker-blue":"text-gray-400"}`,weight:"light"}),l.jsx("p",{className:"text-2xl text-pencil font-bold",children:c?"å¿«æŠŠç…§ç‰‡ä¸¢è¿›æ¥ï¼":"æ‹–æ‹½æ¶‚é¸¦åˆ°è¿™é‡Œ"}),l.jsx("p",{className:"text-lg text-gray-400 mt-2",children:"æˆ–è€…ç‚¹å‡»é€‰æ‹©"})]})),a&&l.jsxs("div",{className:"text-center py-12",children:[l.jsxs("div",{className:"text-3xl font-bold text-pencil mb-4 animate-bounce",children:["æ­£åœ¨ç»˜åˆ¶ä¸­... ",Math.round(m.percent),"%"]}),l.jsx("div",{className:"w-full h-4 border-2 border-pencil rounded-full overflow-hidden p-0.5",children:l.jsx("div",{className:"h-full bg-marker-yellow transition-all duration-300 rounded-full",style:{width:`${m.percent}%`}})})]}),t.length>0&&!a&&l.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-8 duration-500",children:[l.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6 border-b-2 border-dashed border-gray-200 pb-4",children:[l.jsxs("div",{className:"text-2xl font-bold text-pencil",children:[l.jsx(B,{size:32,className:"inline text-green-500 mr-2"}),"å®Œæˆ: ",V]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:y,className:"btn-doodle text-sm py-1 px-3 flex items-center gap-1",title:"å¯¼å‡º JSON",children:[l.jsx(Q,{})," æ•°æ®"]}),l.jsxs("button",{onClick:A,className:"btn-doodle text-sm py-1 px-3 flex items-center gap-1",title:"å¤åˆ¶æ‰€æœ‰é“¾æ¥",children:[l.jsx(Y,{})," é“¾æ¥"]}),l.jsxs("button",{onClick:h,className:"btn-doodle text-sm py-1 px-3 flex items-center gap-1",title:"å¤åˆ¶ Markdown",children:[l.jsx(X,{})," MD"]})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.map((o,i)=>l.jsxs("div",{className:`
                  bg-white p-3 shadow-sketch border border-gray-200 relative transition-transform hover:scale-105 hover:z-10
                  ${i%2===0?"rotate-slight-1":"rotate-slight-n2"}
                `,children:[l.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-16 h-6 bg-white/40 backdrop-blur-sm -rotate-2 shadow-tape"}),o.success?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"aspect-video bg-gray-50 overflow-hidden mb-3 border border-gray-100",children:l.jsx("img",{src:window.location.origin+o.data.src,alt:o.filename,className:"w-full h-full object-contain"})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:window.location.origin+o.data.src,readOnly:!0,className:"input-hand text-sm flex-1",onClick:f=>f.target.select()}),l.jsx("button",{onClick:()=>g(window.location.origin+o.data.src),className:"text-pencil hover:text-marker-blue transition-colors",children:l.jsx(J,{size:24})})]})]}):l.jsxs("div",{className:"p-4 text-center text-red-500",children:[l.jsx(q,{size:32,className:"mx-auto mb-2"}),l.jsxs("p",{children:[o.filename," å¤±è´¥"]}),l.jsx("p",{className:"text-sm",children:o.error}),l.jsx("button",{onClick:()=>Z(i),className:"mt-2 text-pencil underline",children:"é‡è¯•"})]})]},i))}),l.jsx("div",{className:"mt-12 text-center",children:l.jsxs("button",{className:"btn-primary text-2xl px-8 py-3 rotate-slight-n1",onClick:b,children:[l.jsx(F,{className:"inline mr-2"}),"å†æ¥ä¸€å¼ "]})})]})]})};export{d0 as default};
