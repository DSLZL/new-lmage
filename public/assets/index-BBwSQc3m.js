var g=Object.defineProperty,j=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var u=(l,s,e)=>s in l?g(l,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[s]=e,h=(l,s)=>{for(var e in s||(s={}))y.call(s,e)&&u(l,e,s[e]);if(p)for(var e of p(s))w.call(s,e)&&u(l,e,s[e]);return l},x=(l,s)=>j(l,N(s));var f=(l,s,e)=>new Promise((d,t)=>{var m=r=>{try{c(e.next(r))}catch(n){t(n)}},i=r=>{try{c(e.throw(r))}catch(n){t(n)}},c=r=>r.done?d(r.value):Promise.resolve(r.value).then(m,i);c((e=e.apply(l,s)).next())});import{j as a,z as o}from"./ui-vendor-BkLQtwW7.js";import{u as v,r as b,L as k}from"./react-vendor-DbADd6nL.js";import{b as C}from"./index-BPW3Y20o.js";import"./state-vendor-DhTtZAk7.js";const E=()=>{const l=v(),{register:s}=C(),[e,d]=b.useState(!1),[t,m]=b.useState({username:"",email:"",password:"",confirmPassword:""}),i=r=>{m(x(h({},t),{[r.target.name]:r.target.value}))},c=r=>f(void 0,null,function*(){if(r.preventDefault(),!t.username)return o.error("你是谁？");if(!t.email)return o.error("得留个邮箱！");if(t.password.length<6)return o.error("暗号太短了！");if(t.password!==t.confirmPassword)return o.error("两次暗号对不上！");d(!0);try{const n=yield s({username:t.username,email:t.email,password:t.password});n.success?(o.success("手账本已备好！欢迎！"),l("/dashboard")):o.error(n.error)}catch(n){o.error("没法创建账号...")}finally{d(!1)}});return a.jsxs("div",{className:"w-full",children:[a.jsxs("form",{onSubmit:c,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-xl font-hand font-bold text-pencil ml-1 rotate-slight-n1",children:"起个名字"}),a.jsx("input",{type:"text",name:"username",placeholder:"艺术家大名",className:"input-hand",value:t.username,onChange:i,disabled:e})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-xl font-hand font-bold text-pencil ml-1 rotate-slight-1",children:"邮箱"}),a.jsx("input",{type:"email",name:"email",placeholder:"contact@doodle.com",className:"input-hand",value:t.email,onChange:i,disabled:e})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-xl font-hand font-bold text-pencil ml-1 rotate-slight-n1",children:"秘密暗号"}),a.jsx("input",{type:"password",name:"password",placeholder:"至少6个字",className:"input-hand",value:t.password,onChange:i,disabled:e})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-xl font-hand font-bold text-pencil ml-1 rotate-slight-1",children:"重复暗号"}),a.jsx("input",{type:"password",name:"confirmPassword",placeholder:"确认一下",className:"input-hand",value:t.confirmPassword,onChange:i,disabled:e})]}),a.jsx("button",{type:"submit",className:"btn-primary w-full mt-8 text-2xl font-bold py-3 rotate-slight-n1 disabled:opacity-50",disabled:e,children:e?"正在装订...":"创建手账本"})]}),a.jsx("div",{className:"mt-8 text-center",children:a.jsxs("p",{className:"font-hand text-lg text-gray-500",children:["已经有手账了？ ",a.jsx(k,{to:"/login",className:"text-marker-blue underline decoration-wavy font-bold hover:text-blue-500",children:"打开它"})]})})]})};export{E as default};
