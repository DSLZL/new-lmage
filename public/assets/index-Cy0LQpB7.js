var C=Object.defineProperty,F=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var w=(r,t,s)=>t in r?C(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,i=(r,t)=>{for(var s in t||(t={}))S.call(t,s)&&w(r,s,t[s]);if(Z)for(var s of Z(t))I.call(t,s)&&w(r,s,t[s]);return r},d=(r,t)=>F(r,k(t));var A=(r,t,s)=>new Promise((l,h)=>{var g=c=>{try{o(s.next(c))}catch(u){h(u)}},x=c=>{try{o(s.throw(c))}catch(u){h(u)}},o=c=>c.done?l(c.value):Promise.resolve(c.value).then(g,x);o((s=s.apply(r,t)).next())});import{j as a,z as m}from"./ui-vendor-BkLQtwW7.js";import{r as e}from"./react-vendor-DbADd6nL.js";import{p as f,b as $,d as L,s as z}from"./index-Bfp0FfWb.js";import{h as R}from"./ShieldCheck.es-BXHrzR_v.js";import{c as D}from"./Warning.es-4GG1kNmh.js";import"./state-vendor-DhTtZAk7.js";const q=new Map([["bold",e.createElement(e.Fragment,null,e.createElement("path",{d:"M225.29,165.93C216.61,151,212,129.57,212,104a84,84,0,0,0-168,0c0,25.58-4.59,47-13.27,61.93A20.08,20.08,0,0,0,30.66,186,19.77,19.77,0,0,0,48,196H84.18a44,44,0,0,0,87.64,0H208a19.77,19.77,0,0,0,17.31-10A20.08,20.08,0,0,0,225.29,165.93ZM128,212a20,20,0,0,1-19.6-16h39.2A20,20,0,0,1,128,212ZM54.66,172C63.51,154,68,131.14,68,104a60,60,0,0,1,120,0c0,27.13,4.48,50,13.33,68Z"}))],["duotone",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,192H48a8,8,0,0,1-6.88-12C47.71,168.6,56,139.81,56,104a72,72,0,0,1,144,0c0,35.82,8.3,64.6,14.9,76A8,8,0,0,1,208,192Z",opacity:"0.2"}),e.createElement("path",{d:"M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z"}))],["fill",e.createElement(e.Fragment,null,e.createElement("path",{d:"M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216Z"}))],["light",e.createElement(e.Fragment,null,e.createElement("path",{d:"M220.07,176.94C214.41,167.2,206,139.73,206,104a78,78,0,1,0-156,0c0,35.74-8.42,63.2-14.08,72.94A14,14,0,0,0,48,198H90.48a38,38,0,0,0,75,0H208a14,14,0,0,0,12.06-21.06ZM128,218a26,26,0,0,1-25.29-20h50.58A26,26,0,0,1,128,218Zm81.71-33a1.9,1.9,0,0,1-1.7,1H48a1.9,1.9,0,0,1-1.7-1,2,2,0,0,1,0-2C53.87,170,62,139.69,62,104a66,66,0,1,1,132,0c0,35.68,8.14,65.95,15.71,79A2,2,0,0,1,209.71,185Z"}))],["regular",e.createElement(e.Fragment,null,e.createElement("path",{d:"M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z"}))],["thin",e.createElement(e.Fragment,null,e.createElement("path",{d:"M218.35,178C212.58,168,204,140.13,204,104a76,76,0,1,0-152,0c0,36.13-8.59,64-14.36,73.95A12,12,0,0,0,48,196H92.23a36,36,0,0,0,71.54,0H208A12,12,0,0,0,218.35,178ZM128,220a28,28,0,0,1-27.71-24h55.42A28,28,0,0,1,128,220Zm83.45-34a3.91,3.91,0,0,1-3.44,2H48a3.91,3.91,0,0,1-3.44-2,4,4,0,0,1,0-4C52,169.17,60,139.32,60,104a68,68,0,1,1,136,0c0,35.31,8,65.17,15.44,78A4,4,0,0,1,211.45,186Z"}))]]),B=new Map([["bold",e.createElement(e.Fragment,null,e.createElement("path",{d:"M79.51,144.49a12,12,0,1,1,17-17L112,143l47.51-47.52a12,12,0,0,1,17,17l-56,56a12,12,0,0,1-17,0ZM228,48V208a20,20,0,0,1-20,20H48a20,20,0,0,1-20-20V48A20,20,0,0,1,48,28H208A20,20,0,0,1,228,48Zm-24,4H52V204H204Z"}))],["duotone",e.createElement(e.Fragment,null,e.createElement("path",{d:"M216,48V208a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H208A8,8,0,0,1,216,48Z",opacity:"0.2"}),e.createElement("path",{d:"M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM224,48V208a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32H208A16,16,0,0,1,224,48ZM208,208V48H48V208H208Z"}))],["fill",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm-34.34,77.66-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35a8,8,0,0,1,11.32,11.32Z"}))],["light",e.createElement(e.Fragment,null,e.createElement("path",{d:"M172.24,99.76a6,6,0,0,1,0,8.48l-56,56a6,6,0,0,1-8.48,0l-24-24a6,6,0,0,1,8.48-8.48L112,151.51l51.76-51.75A6,6,0,0,1,172.24,99.76ZM222,48V208a14,14,0,0,1-14,14H48a14,14,0,0,1-14-14V48A14,14,0,0,1,48,34H208A14,14,0,0,1,222,48Zm-12,0a2,2,0,0,0-2-2H48a2,2,0,0,0-2,2V208a2,2,0,0,0,2,2H208a2,2,0,0,0,2-2Z"}))],["regular",e.createElement(e.Fragment,null,e.createElement("path",{d:"M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM224,48V208a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32H208A16,16,0,0,1,224,48ZM208,208V48H48V208H208Z"}))],["thin",e.createElement(e.Fragment,null,e.createElement("path",{d:"M170.83,101.17a4,4,0,0,1,0,5.66l-56,56a4,4,0,0,1-5.66,0l-24-24a4,4,0,0,1,5.66-5.66L112,154.34l53.17-53.17A4,4,0,0,1,170.83,101.17ZM220,48V208a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V48A12,12,0,0,1,48,36H208A12,12,0,0,1,220,48Zm-8,0a4,4,0,0,0-4-4H48a4,4,0,0,0-4,4V208a4,4,0,0,0,4,4H208a4,4,0,0,0,4-4Z"}))]]),K=new Map([["bold",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,76H180V56A52,52,0,0,0,76,56V76H48A20,20,0,0,0,28,96V208a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V96A20,20,0,0,0,208,76ZM100,56a28,28,0,0,1,56,0V76H100ZM204,204H52V100H204Zm-76-92a32,32,0,0,0-12,61.66V180a12,12,0,0,0,24,0v-6.34A32,32,0,0,0,128,112Zm0,24a8,8,0,1,1-8,8A8,8,0,0,1,128,136Z"}))],["duotone",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,88H48a8,8,0,0,0-8,8V208a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V96A8,8,0,0,0,208,88Zm-80,72a20,20,0,1,1,20-20A20,20,0,0,1,128,160Z",opacity:"0.2"}),e.createElement("path",{d:"M208,80H176V56a48,48,0,0,0-96,0V80H48A16,16,0,0,0,32,96V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V96A16,16,0,0,0,208,80ZM96,56a32,32,0,0,1,64,0V80H96ZM208,208H48V96H208V208Zm-80-96a28,28,0,0,0-8,54.83V184a8,8,0,0,0,16,0V166.83A28,28,0,0,0,128,112Zm0,40a12,12,0,1,1,12-12A12,12,0,0,1,128,152Z"}))],["fill",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,80H176V56a48,48,0,0,0-96,0V80H48A16,16,0,0,0,32,96V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V96A16,16,0,0,0,208,80Zm-72,78.63V184a8,8,0,0,1-16,0V158.63a24,24,0,1,1,16,0ZM160,80H96V56a32,32,0,0,1,64,0Z"}))],["light",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,82H174V56a46,46,0,0,0-92,0V82H48A14,14,0,0,0,34,96V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V96A14,14,0,0,0,208,82ZM94,56a34,34,0,0,1,68,0V82H94ZM210,208a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V96a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2Zm-82-94a26,26,0,0,0-6,51.29V184a6,6,0,0,0,12,0V165.29A26,26,0,0,0,128,114Zm0,40a14,14,0,1,1,14-14A14,14,0,0,1,128,154Z"}))],["regular",e.createElement(e.Fragment,null,e.createElement("path",{d:"M128,112a28,28,0,0,0-8,54.83V184a8,8,0,0,0,16,0V166.83A28,28,0,0,0,128,112Zm0,40a12,12,0,1,1,12-12A12,12,0,0,1,128,152Zm80-72H176V56a48,48,0,0,0-96,0V80H48A16,16,0,0,0,32,96V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V96A16,16,0,0,0,208,80ZM96,56a32,32,0,0,1,64,0V80H96ZM208,208H48V96H208V208Z"}))],["thin",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,84H172V56a44,44,0,0,0-88,0V84H48A12,12,0,0,0,36,96V208a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V96A12,12,0,0,0,208,84ZM92,56a36,36,0,0,1,72,0V84H92ZM212,208a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V96a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4Zm-84-92a24,24,0,0,0-4,47.66V184a4,4,0,0,0,8,0V163.66A24,24,0,0,0,128,116Zm0,40a16,16,0,1,1,16-16A16,16,0,0,1,128,156Z"}))]]),T=new Map([["bold",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,28H48A20,20,0,0,0,28,48V208a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V48A20,20,0,0,0,208,28Zm-4,176H52V52H204Z"}))],["duotone",e.createElement(e.Fragment,null,e.createElement("path",{d:"M216,48V208a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H208A8,8,0,0,1,216,48Z",opacity:"0.2"}),e.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,176H48V48H208V208Z"}))],["fill",e.createElement(e.Fragment,null,e.createElement("path",{d:"M224,48V208a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32H208A16,16,0,0,1,224,48Z"}))],["light",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,34H48A14,14,0,0,0,34,48V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V48A14,14,0,0,0,208,34Zm2,174a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2Z"}))],["regular",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,176H48V48H208V208Z"}))],["thin",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,36H48A12,12,0,0,0,36,48V208a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V48A12,12,0,0,0,208,36Zm4,172a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4Z"}))]]),E=e.forwardRef((r,t)=>e.createElement(f,d(i({ref:t},r),{weights:q})));E.displayName="BellIcon";const G=E,j=e.forwardRef((r,t)=>e.createElement(f,d(i({ref:t},r),{weights:B})));j.displayName="CheckSquareIcon";const J=j,N=e.forwardRef((r,t)=>e.createElement(f,d(i({ref:t},r),{weights:K})));N.displayName="LockKeyIcon";const O=N,v=e.forwardRef((r,t)=>e.createElement(f,d(i({ref:t},r),{weights:T})));v.displayName="SquareIcon";const M=v,a0=()=>{const{changePassword:r}=$(),[t,s]=e.useState(!1),[l,h]=e.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[g,x]=e.useState(!1),[o,c]=e.useState({emailNotifications:!0,uploadNotifications:!0,autoSave:!0,compressImages:!1,defaultPrivacy:"public"}),u=n=>A(void 0,null,function*(){if(n.preventDefault(),!l.currentPassword)return m.error("需要当前暗号！");if(l.newPassword.length<6)return m.error("新暗号太短了！");if(l.newPassword!==l.confirmPassword)return m.error("两次暗号不一致！");x(!0);try{const p=yield r(l.currentPassword,l.newPassword);p.success?(m.success("暗号已修改！"),h({currentPassword:"",newPassword:"",confirmPassword:""}),s(!1)):m.error(p.error)}catch(p){m.error("修改失败...")}finally{x(!1)}}),H=(n,p)=>{c(b=>d(i({},b),{[n]:p})),m.success("已勾选！")},y=()=>{window.confirm("撕掉所有纸页并烧毁日记本？(注销账号)")&&window.confirm("真的吗？没法反悔的。")&&m.error("还不能烧书 (功能未开放)")},V=({label:n,description:p,checked:b,onChange:P})=>a.jsxs("div",{className:"flex items-start gap-3 py-3 border-b border-dashed border-gray-200 last:border-0 cursor-pointer group",onClick:()=>P(!b),children:[a.jsx("div",{className:"mt-1 text-pencil group-hover:text-marker-blue transition-colors",children:b?a.jsx(J,{size:24,weight:"fill"}):a.jsx(M,{size:24})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-hand text-xl font-bold text-pencil",children:n}),a.jsx("p",{className:"font-hand text-sm text-gray-500",children:p})]})]});return a.jsxs("div",{className:"max-w-3xl mx-auto animate-in fade-in duration-500",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-4xl font-hand font-bold text-pencil rotate-slight-n1",children:[a.jsx(L,{className:"inline mr-2 animate-spin-slow"}),"偏好设置"]}),a.jsx("p",{className:"text-gray-400 font-hand mt-1 rotate-slight-1",children:"调整系统..."})]}),a.jsxs("div",{className:"bg-white p-8 shadow-sketch border border-gray-200 relative rotate-slight-1 rounded-sm",children:[a.jsx("div",{className:"absolute -top-3 right-1/4 w-24 h-8 bg-white/40 backdrop-blur-sm -rotate-2 shadow-tape"}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("section",{children:[a.jsxs("h2",{className:"text-2xl font-hand font-bold text-pencil mb-4 border-b-2 border-marker-yellow inline-block pr-4 rotate-slight-n1",children:[a.jsx(G,{className:"inline mr-1"})," 通知消息"]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(V,{label:"邮件更新",description:"接收猫头鹰信件 (邮件)",checked:o.emailNotifications,onChange:n=>H("emailNotifications",n)}),a.jsx(V,{label:"上传提醒",description:"搞定的时候叮一下",checked:o.uploadNotifications,onChange:n=>H("uploadNotifications",n)})]})]}),a.jsxs("section",{children:[a.jsxs("h2",{className:"text-2xl font-hand font-bold text-pencil mb-4 border-b-2 border-marker-blue inline-block pr-4 rotate-slight-1",children:[a.jsx(z,{className:"inline mr-1"})," 涂鸦设置"]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(V,{label:"自动保存",description:"自动把涂鸦存进图库",checked:o.autoSave,onChange:n=>H("autoSave",n)}),a.jsx(V,{label:"压缩图片",description:"压扁一点好省纸",checked:o.compressImages,onChange:n=>H("compressImages",n)}),a.jsxs("div",{className:"flex items-center gap-3 py-3 border-b border-dashed border-gray-200",children:[a.jsx("div",{className:"mt-1",children:a.jsx(M,{size:24,className:"opacity-0"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-hand text-xl font-bold text-pencil",children:"默认隐私"}),a.jsxs("select",{className:"mt-1 bg-transparent border-b-2 border-dashed border-gray-300 font-hand text-lg focus:border-pencil outline-none w-full max-w-xs",value:o.defaultPrivacy,onChange:n=>H("defaultPrivacy",n.target.value),children:[a.jsx("option",{value:"public",children:"公开 (给所有人看)"}),a.jsx("option",{value:"private",children:"私密 (只有我看)"})]})]})]})]})]}),a.jsxs("section",{children:[a.jsxs("h2",{className:"text-2xl font-hand font-bold text-pencil mb-4 border-b-2 border-marker-pink inline-block pr-4 rotate-slight-n1",children:[a.jsx(R,{className:"inline mr-1"})," 安全防卫"]}),t?a.jsxs("form",{onSubmit:u,className:"bg-gray-50 p-4 border border-dashed border-gray-300 rounded relative",children:[a.jsx("button",{type:"button",onClick:()=>s(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-pencil",children:"取消"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"password",name:"currentPassword",placeholder:"旧暗号",className:"input-hand bg-white",value:l.currentPassword,onChange:n=>h(d(i({},l),{currentPassword:n.target.value}))}),a.jsx("input",{type:"password",name:"newPassword",placeholder:"新暗号",className:"input-hand bg-white",value:l.newPassword,onChange:n=>h(d(i({},l),{newPassword:n.target.value}))}),a.jsx("input",{type:"password",name:"confirmPassword",placeholder:"确认新暗号",className:"input-hand bg-white",value:l.confirmPassword,onChange:n=>h(d(i({},l),{confirmPassword:n.target.value}))}),a.jsx("button",{type:"submit",disabled:g,className:"btn-primary w-full mt-2",children:g?"正在更新...":"更新暗号"})]})]}):a.jsxs("button",{onClick:()=>s(!0),className:"btn-doodle w-full text-left flex justify-between items-center",children:[a.jsx("span",{children:"修改暗号"}),a.jsx(O,{})]})]}),a.jsx("section",{className:"pt-8",children:a.jsxs("button",{onClick:y,className:"w-full border-2 border-dashed border-red-200 text-red-400 font-hand text-xl py-2 hover:bg-red-50 hover:text-red-500 hover:border-red-400 transition-all rotate-slight-1",children:[a.jsx(D,{className:"inline mb-1 mr-2"}),"焚烧日记本 (注销账号)"]})})]})]})]})};export{a0 as default};
